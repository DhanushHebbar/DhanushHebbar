name: God-Level-Metrics

on:
  schedule:
    - cron: "30 18 * * *" # Runs daily at ~12:00 AM IST
  workflow_dispatch:
  push:
    branches: ["main", "master"]

jobs:
  github-metrics:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: lowlighter/metrics@latest
        with:
          # Your Personal Access Token (Required for Private Repos)
          token: ${{ secrets.METRICS_TOKEN }}

          # Configuration
          user: DhanushHebbar
          template: classic
          config_timezone: Asia/Kolkata
          filename: github-metrics.svg
          
          # CLEANER LAYOUT (Resume Style)
          # Removed 'community' and 'repositories' to hide the "0" stats
          base: header, activity
          config_order: base.header, isocalendar, languages, habits
          
          # 1. ISOMETRIC CALENDAR (The 3D Visual)
          plugin_isocalendar: yes
          plugin_isocalendar_duration: half-year 
          
          # 2. CODING HABITS (Fixing the Error)
          plugin_habits: yes
          plugin_habits_from: 1000       # increased to catch older events
          plugin_habits_days: 30         # look at last 30 days of activity
          plugin_habits_facts: yes
          plugin_habits_charts: yes
          plugin_habits_trim: yes        # hides low activity days
          
          # 3. LANGUAGES (The Tech Stack Proof)
          plugin_languages: yes
          plugin_languages_ignored: html, css, tex, less, dockerfile, makefile, qmake, lex, cmake, gnuplot
          plugin_languages_details: lines, percentage
          plugin_languages_sections: most-used
          plugin_languages_limit: 8
          
          # 4. LINES OF CODE (Volume Metric)
          plugin_lines: yes
          plugin_lines_history_limit: 1
          plugin_lines_repositories_limit: 4
          plugin_lines_sections: base
